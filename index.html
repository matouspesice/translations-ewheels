<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E-Bike Questions Editor test</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; font-family: system-ui, -apple-system, sans-serif; }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState } = React;

    // EXACT COPY of your original JSON - preserving all field names exactly
    const initialData = {
  "parameters": [
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-battery-capacity-exact-wh",
      "name": "Batterikapasitet (eksakt)",
      "options": []
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-battery-range",
      "name": "Batterikapasitet",
      "options": [
        {
          "value": "battery-400-599",
          "name": "400‚Äì599 Wh"
        },
        {
          "value": "battery-600-899",
          "name": "600‚Äì899 Wh"
        },
        {
          "value": "battery-900-plus",
          "name": "900+ Wh"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-battery-removable",
      "name": "Uttakbart batteri",
      "options": [
        {
          "value": "removable-no",
          "name": "Ikke uttakbart"
        },
        {
          "value": "removable-yes",
          "name": "Uttakbart"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-feature-removable-battery",
      "name": "Uttakbart batteri",
      "options": [
        {
          "value": "feature-removable-battery-no",
          "name": "nei"
        },
        {
          "value": "feature-removable-battery-yes",
          "name": "ja"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-cargo-capacity",
      "name": "Nyttelast",
      "options": [
        {
          "value": "payload-100",
          "name": "~100 kg"
        },
        {
          "value": "payload-120-140",
          "name": "120‚Äì140 kg"
        },
        {
          "value": "payload-140-plus",
          "name": "140+ kg"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-feature-brand-components",
      "name": "Komponenter fra kjente merker",
      "options": [
        {
          "value": "feature-brand-components-no",
          "name": "nei"
        },
        {
          "value": "feature-brand-components-yes",
          "name": "ja"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-component-tier",
      "name": "Komponentniv√•",
      "options": [
        {
          "value": "entry-components",
          "name": "Innstegskomponenter"
        },
        {
          "value": "high-components",
          "name": "Toppklassekomponenter"
        },
        {
          "value": "mid-components",
          "name": "Mellomklassekomponenter"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-all-features",
      "name": "Funksjoner",
      "options": [
        {
          "value": "carbon-frame",
          "name": "Karbonramme"
        },
        {
          "value": "carrier",
          "name": "Bagasjebrett"
        },
        {
          "value": "feature-brand-backed-components",
          "name": "Komponenter fra kjente merker"
        },
        {
          "value": "feature-removable-battery-present",
          "name": "Uttakbart batteri"
        },
        {
          "value": "feature-torque-sensor-natural-pedal-feel",
          "name": "Momentf√∏ler (naturlig tr√•kkf√∏lelse)"
        },
        {
          "value": "fenders",
          "name": "Skjermer"
        },
        {
          "value": "full-suspension",
          "name": "Fulldempet"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-features-manual",
      "name": "Funksjoner (manuell)",
      "options": [
        {
          "value": "carbon-frame",
          "name": "Karbonramme"
        },
        {
          "value": "carrier",
          "name": "Bagasjebrett"
        },
        {
          "value": "fenders",
          "name": "Skjermer"
        },
        {
          "value": "full-suspension",
          "name": "Fulldempet"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-feature-torque-sensor",
      "name": "Momentf√∏ler (naturlig tr√•kkf√∏lelse)",
      "options": [
        {
          "value": "no",
          "name": "Nei"
        },
        {
          "value": "yes",
          "name": "Ja"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-frame-type",
      "name": "Rammetype",
      "options": [
        {
          "value": "high-entry",
          "name": "H√∏yt innsteg"
        },
        {
          "value": "low-entry",
          "name": "Lavt innsteg"
        },
        {
          "value": "medium-high-entry",
          "name": "Mellomh√∏yt innsteg"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-intended-use",
      "name": "Bruksomr√•de / sykkeltype",
      "options": [
        {
          "value": "cargo-longtail",
          "name": "Lastesykkel / longtail"
        },
        {
          "value": "commuter-urban",
          "name": "Pendling / by"
        },
        {
          "value": "leisure-cruiser-fatbike",
          "name": "Fritid / cruiser / fatbike"
        },
        {
          "value": "mountain-emtb",
          "name": "Terreng / eMTB"
        },
        {
          "value": "touring-trekking",
          "name": "Tursykling / trekking"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-maintenance-drivetrain",
      "name": "Vedlikeholdspreferanse",
      "options": [
        {
          "value": "low-maintenance",
          "name": "Lite vedlikehold"
        },
        {
          "value": "standard-maintenance",
          "name": "Standard vedlikehold"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-motor-torque-exact-nm",
      "name": "Motormoment (eksakt)",
      "options": []
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-motor-torque",
      "name": "Motormoment",
      "options": [
        {
          "value": "torque-70-80",
          "name": "70‚Äì80 Nm"
        },
        {
          "value": "torque-80-95",
          "name": "80‚Äì95 Nm"
        },
        {
          "value": "torque-95-115",
          "name": "95‚Äì115 Nm"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-optimal-range-exact-km",
      "name": "Optimal rekkevidde (eksakt)",
      "options": []
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-rider-height",
      "name": "Kroppsh√∏yde",
      "options": [
        {
          "value": "large-175-185",
          "name": "Large (175‚Äì185 cm)"
        },
        {
          "value": "medium-165-175",
          "name": "Medium (165‚Äì175 cm)"
        },
        {
          "value": "small-150-165",
          "name": "Small (150‚Äì165 cm)"
        },
        {
          "value": "xlarge-185-plus",
          "name": "X-Large (185+ cm)"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-rider-height-slided-cm",
      "name": "Kroppsh√∏yde (glidefelt)",
      "options": []
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-terrain-capability",
      "name": "Terrengkapasitet",
      "options": [
        {
          "value": "gravel-mixed",
          "name": "Grus / variert"
        },
        {
          "value": "trail-mountain",
          "name": "Sti / terreng"
        },
        {
          "value": "urban-road",
          "name": "By / landevei"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-height-question-question",
      "name": "Kroppsh√∏yde",
      "options": [
        {
          "value": "165-175-cm",
          "name": "165‚Äì175 cm"
        },
        {
          "value": "175-185-cm",
          "name": "175‚Äì185 cm"
        },
        {
          "value": "over-185-cm",
          "name": "Over 185 cm"
        },
        {
          "value": "under-165-cm",
          "name": "Under 165 cm"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-intended-use-question-question",
      "name": "Bruksomr√•de",
      "options": [
        {
          "value": "casual-cruiser",
          "name": "Rolige turer / cruiser"
        },
        {
          "value": "city-commuting",
          "name": "Pendling i byen"
        },
        {
          "value": "heavy-cargo-family",
          "name": "Tung last / familie"
        },
        {
          "value": "off-road-trails",
          "name": "Terreng og stier"
        },
        {
          "value": "touring-long-distance",
          "name": "Tursykling og langdistanse"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-dealbreakers-question-question",
      "name": "M√• ha",
      "options": [
        {
          "value": "brand-components",
          "name": "Komponenter fra kjente merker"
        },
        {
          "value": "fenders",
          "name": "Skjermer"
        },
        {
          "value": "removable-battery",
          "name": "Uttakbart batteri"
        },
        {
          "value": "torque-sensor",
          "name": "Momentf√∏ler"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-frame-type-question",
      "name": "Rammetype",
      "options": [
        {
          "value": "high-entry",
          "name": "H√∏yt innsteg"
        },
        {
          "value": "low-entry",
          "name": "Lavt innsteg"
        },
        {
          "value": "medium-high-entry",
          "name": "Mellomh√∏yt innsteg"
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-features-manual-question",
      "name": "Funksjoner",
      "options": [
        {
          "value": "carbon-frame",
          "name": "Karbonramme"
        },
        {
          "value": "carrier",
          "name": "Bagasjebrett"
        },
        {
          "value": "fenders",
          "name": "Skjermer"
        },
        {
          "value": "full-suspension",
          "name": "Fulldempet"
        }
      ]
    }
  ],
  "questions": [
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-rider-height-slided-cm",
      "name": "Kroppsh√∏yde (glidefelt)",
      "title": "Skriv inn <H>h√∏yden din</H> for √• se bare sykler som passer deg.",
      "answers": []
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-height-question-question",
      "name": "Kroppsh√∏yde",
      "title": "Hvor h√∏y er du?",
      "answers": [
        {
          "code": "under-165-cm",
          "name": "Under 165 cm",
          "bucketDefinition": "Sikrer rammest√∏rrelse <strong>Small</strong> (150‚Äì165 cm)."
        },
        {
          "code": "165-175-cm",
          "name": "165‚Äì175 cm",
          "bucketDefinition": "Anbefaler rammest√∏rrelse <strong>Medium</strong> (165‚Äì175 cm) for best komfort."
        },
        {
          "code": "175-185-cm",
          "name": "175‚Äì185 cm",
          "bucketDefinition": "Krever rammest√∏rrelse <strong>Large</strong> (175‚Äì185 cm) for riktig passform."
        },
        {
          "code": "over-185-cm",
          "name": "Over 185 cm",
          "bucketDefinition": "Betyr at jeg trenger rammest√∏rrelse <strong>X‚ÄëLarge</strong> (185+ cm)."
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-intended-use-question-question",
      "name": "Bruksomr√•de",
      "title": "Hva er hovedform√•let med elsykkelen?",
      "answers": [
        {
          "code": "city-commuting",
          "name": "Pendling i byen",
          "bucketDefinition": "Gir en <strong>pendlersykkel</strong> optimalisert for bykj√∏ring."
        },
        {
          "code": "heavy-cargo-family",
          "name": "Tung last / familie",
          "bucketDefinition": "Gir en <strong>lastesykkel</strong> (longtail) for tung transport."
        },
        {
          "code": "off-road-trails",
          "name": "Terreng og stier",
          "bucketDefinition": "Gir en <strong>terrengsykkel</strong> (eMTB) for krevende stier."
        },
        {
          "code": "touring-long-distance",
          "name": "Tursykling og langdistanse",
          "bucketDefinition": "Velger en <strong>trekking-/tursykkel</strong> for lange turer."
        },
        {
          "code": "casual-cruiser",
          "name": "Rolige turer / cruiser",
          "bucketDefinition": "Gir en <strong>cruiser</strong>/fatbike for avslappede turer."
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-terrain-hills-question-question",
      "name": "Terreng og bakker",
      "title": "Hvilket terreng sykler du mest i?",
      "answers": [
        {
          "code": "mostly-flat-roads",
          "name": "For det meste flate veier",
          "bucketDefinition": "Prioriterer <strong>70‚Äì80 Nm</strong> motormoment for lette, effektive turer p√• flatmark ‚Äì uten un√∏dvendig h√∏yt moment."
        },
        {
          "code": "rolling-hills",
          "name": "Sm√•kupert terreng",
          "bucketDefinition": "Sikter mot <strong>80‚Äì95 Nm</strong> moment for trygg klatring i sm√•kupert terreng, bedre enn oppsett for kun flatmark."
        },
        {
          "code": "steep-hills-heavy-loads",
          "name": "Bratte bakker / tung last",
          "bucketDefinition": "Gir <strong>95‚Äì115 Nm</strong> moment s√• du takler bratte bakker og tung last p√•litelig."
        },
        {
          "code": "mixed-surfaces-gravel",
          "name": "Blandet underlag / grus",
          "bucketDefinition": "Gir <strong>grusklare</strong> terrengegenskaper for r√∏ft, variert underlag ‚Äì ikke bare jevn vei."
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-battery-range-question-question",
      "name": "Batteri og rekkevidde",
      "title": "Hvor langt sykler du vanligvis f√∏r du lader?",
      "answers": [
        {
          "code": "short-daily-rides-20-40km",
          "name": "Korte daglige turer (20‚Äì40 km)",
          "bucketDefinition": "Velger et batteri p√• <strong>400‚Äì599 Wh</strong> for kort daglig rekkevidde, ikke langtur."
        },
        {
          "code": "medium-commutes-40-70km",
          "name": "Middels pendling (40‚Äì70 km)",
          "bucketDefinition": "Velger <strong>600‚Äì899 Wh</strong> batteri for middels pendling ‚Äì god balanse mellom vekt og rekkevidde."
        },
        {
          "code": "long-rides-70-100plus-km",
          "name": "Lange turer (70‚Äì100+ km)",
          "bucketDefinition": "Velger <strong>900+ Wh</strong> batteri for maksimal rekkevidde p√• lange turer."
        },
        {
          "code": "multi-day-heavy-use",
          "name": "Flere dager / hard bruk",
          "bucketDefinition": "G√•r for <strong>900+ Wh</strong> batteri for √• t√•le flerdagers og hard bruk."
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-cargo-capacity-question-question",
      "name": "Behov for last",
      "title": "Hva pleier du √• frakte?",
      "answers": [
        {
          "code": "light-loads-groceries",
          "name": "Bare meg selv",
          "bucketDefinition": "St√∏tter <strong>100 kg</strong> nyttelast. Holder n√•r last ikke er viktig."
        },
        {
          "code": "kids-regular-loads",
          "name": "Vanlig last",
          "bucketDefinition": "Gir <strong>120‚Äì140 kg</strong> nyttelast til daglige √¶rend og matvarer."
        },
        {
          "code": "heavy-commercial-loads",
          "name": "Barn / tung last",
          "bucketDefinition": "Sikrer <strong>140+ kg</strong> nyttelast og √∏kt <strong>95‚Äì115 Nm</strong> moment s√• du kan frakte barn og tung last."
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-performance-intensity-question-question",
      "name": "Ytelsesniv√•",
      "title": "Hvor hardt kommer du til √• sykle?",
      "answers": [
        {
          "code": "casual-weekend-rides",
          "name": "Pendling / rolige turer",
          "bucketDefinition": "Velger <strong>innstegskomponenter</strong> til pendling ‚Äì rimelig og enkelt."
        },
        {
          "code": "regular-enthusiast",
          "name": "Aktiv mosjonist",
          "bucketDefinition": "Velger <strong>Mellomklassekomponenter</strong> for god balanse mellom ytelse og pris til avslappet helgesykling."
        },
        {
          "code": "serious-competitive",
          "name": "Seri√∏s / konkurranse",
          "bucketDefinition": "Krever <strong>toppklassekomponenter</strong> og <strong>95‚Äì115 Nm</strong> moment for ytelse p√• konkurranseniv√•."
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-ownership-priority-question-question",
      "name": "Prioritet ved eierskap",
      "title": "Hva er viktigst p√• sikt?",
      "answers": [
        {
          "code": "maximum-reliability",
          "name": "Maksimal driftssikkerhet",
          "bucketDefinition": "Prioriterer <strong>komponenter fra kjente merker</strong> ‚Äì utpr√∏vde deler og maksimal driftssikkerhet."
        },
        {
          "code": "easy-service-access",
          "name": "Enkel service",
          "bucketDefinition": "Foretrekker <strong>komponenter fra kjente merker</strong> slik at lokale verksteder enkelt kan gi service og st√∏tte."
        },
        {
          "code": "low-running-costs",
          "name": "Lave driftskostnader",
          "bucketDefinition": "Velger <strong>lite vedlikehold</strong> i drivverk for √• redusere kostnader og styr over tid."
        },
        {
          "code": "performance-first",
          "name": "Ytelse f√∏rst",
          "bucketDefinition": "Prioriterer <strong>toppklassekomponenter</strong> og <strong>95‚Äì115 Nm</strong> moment for topp ytelse."
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-frame-type",
      "name": "Rammetype",
      "title": "Hvilken rammetype √∏nsker du?",
      "answers": [
        {
          "code": "high-entry",
          "name": "H√∏yt innsteg",
          "bucketDefinition": "H√∏yt innsteg gir maksimal rammestivhet og et klassisk uttrykk ‚Äì ofte foretrukket til sporty sykling, terreng og landevei."
        },
        {
          "code": "low-entry",
          "name": "Lavt innsteg",
          "bucketDefinition": "Lavt innsteg prioriterer enkel av- og p√•stigning og maksimal tilgjengelighet ‚Äì typisk p√• pendler- og bysykler."
        },
        {
          "code": "medium-high-entry",
          "name": "Mellomh√∏yt innsteg",
          "bucketDefinition": "Mellomh√∏yt innsteg balanserer stabilitet og god tilgjengelighet ‚Äì passer til allsidig bruk, ofte p√• tur- og hybridsykler."
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-dealbreakers-question-question",
      "name": "M√• ha",
      "title": "Noen funksjoner du m√• ha?",
      "answers": [
        {
          "code": "fenders",
          "name": "Skjermer",
          "bucketDefinition": ""
        },
        {
          "code": "torque-sensor",
          "name": "Momentf√∏ler",
          "bucketDefinition": "Gir <strong>momentf√∏ler</strong> for naturlig tr√•kkf√∏lelse."
        },
        {
          "code": "removable-battery",
          "name": "Uttakbart batteri",
          "bucketDefinition": "Gir <strong>uttakbart batteri</strong> for enkel lading."
        },
        {
          "code": "brand-components",
          "name": "Komponenter fra kjente merker",
          "bucketDefinition": "Prioriterer sykler med <strong>komponenter fra kjente merker</strong> for p√•litelighet."
        }
      ]
    },
    {
      "code": "e-wheels-new-electric-bikes-2025-10-02-160158-features-manual",
      "name": "Funksjoner",
      "title": "Noen funksjoner du m√• ha?",
      "answers": [
        {
          "code": "carbon-frame",
          "name": "Karbonramme",
          "bucketDefinition": ""
        },
        {
          "code": "carrier",
          "name": "Bagasjebrett",
          "bucketDefinition": ""
        },
        {
          "code": "fenders",
          "name": "Skjermer",
          "bucketDefinition": ""
        },
        {
          "code": "full-suspension",
          "name": "Fulldempet",
          "bucketDefinition": ""
        }
      ]
    }
  ]
};

    // English translations for reference only (not exported)
    const englishRef = {
      "e-wheels-new-electric-bikes-2025-10-02-160158-rider-height-slided-cm": {
        title: "Enter your height to see only bikes that will fit you.",
        answers: {}
      },
      "e-wheels-new-electric-bikes-2025-10-02-160158-height-question-question": {
        title: "How tall are you?",
        answers: {
          "under-165-cm": { name: "Under 165 cm", bucket: "Ensures frame size Small (150-165 cm)." },
          "165-175-cm": { name: "165-175 cm", bucket: "Recommends frame size Medium (165-175 cm)." },
          "175-185-cm": { name: "175-185 cm", bucket: "Requires frame size Large (175-185 cm)." },
          "over-185-cm": { name: "Over 185 cm", bucket: "Means X-Large frame size (185+ cm)." }
        }
      },
      "e-wheels-new-electric-bikes-2025-10-02-160158-intended-use-question-question": {
        title: "What's your main reason for getting an e-bike?",
        answers: {
          "city-commuting": { name: "City commuting", bucket: "Gives a Commuter bike optimized for city travel." },
          "heavy-cargo-family": { name: "Heavy cargo / family", bucket: "Provides a Cargo longtail bike." },
          "off-road-trails": { name: "Off-road & trails", bucket: "Gives a Mountain eMTB for rough trails." },
          "touring-long-distance": { name: "Touring & long-distance", bucket: "Selects a Trekking touring e-bike." },
          "casual-cruiser": { name: "Casual / cruiser", bucket: "Gives a Cruiser/fatbike for relaxed rides." }
        }
      },
      "e-wheels-new-electric-bikes-2025-10-02-160158-terrain-hills-question-question": {
        title: "What kind of terrain will you ride most?",
        answers: {
          "mostly-flat-roads": { name: "Mostly flat roads", bucket: "Prioritizes 70-80 Nm motor torque." },
          "rolling-hills": { name: "Rolling hills", bucket: "Targets 80-95 Nm torque." },
          "steep-hills-heavy-loads": { name: "Steep hills / heavy loads", bucket: "Delivers 95-115 Nm torque." },
          "mixed-surfaces-gravel": { name: "Mixed surfaces / gravel", bucket: "Gives gravel-ready terrain capability." }
        }
      },
      "e-wheels-new-electric-bikes-2025-10-02-160158-battery-range-question-question": {
        title: "How far will you typically ride before recharging?",
        answers: {
          "short-daily-rides-20-40km": { name: "Short daily rides (20-40 km)", bucket: "Chooses 400-599 Wh battery." },
          "medium-commutes-40-70km": { name: "Medium commutes (40-70 km)", bucket: "Selects 600-899 Wh battery." },
          "long-rides-70-100plus-km": { name: "Long rides (70-100+ km)", bucket: "Picks 900+ Wh battery." },
          "multi-day-heavy-use": { name: "Multi-day / heavy use", bucket: "Opts for 900+ Wh battery." }
        }
      },
      "e-wheels-new-electric-bikes-2025-10-02-160158-cargo-capacity-question-question": {
        title: "What will you typically carry?",
        answers: {
          "light-loads-groceries": { name: "Only myself", bucket: "Supports 100 kg payload." },
          "kids-regular-loads": { name: "Regular loads", bucket: "Provides 120-140 kg payload." },
          "heavy-commercial-loads": { name: "Kids / heavy loads", bucket: "Ensures 140+ kg payload." }
        }
      },
      "e-wheels-new-electric-bikes-2025-10-02-160158-performance-intensity-question-question": {
        title: "How intensely will you ride?",
        answers: {
          "casual-weekend-rides": { name: "Commuting / casual rides", bucket: "Entry-level components." },
          "regular-enthusiast": { name: "Regular enthusiast", bucket: "Mid-level components." },
          "serious-competitive": { name: "Serious / competitive", bucket: "High-end components." }
        }
      },
      "e-wheels-new-electric-bikes-2025-10-02-160158-ownership-priority-question-question": {
        title: "What matters most long-term?",
        answers: {
          "maximum-reliability": { name: "Maximum reliability", bucket: "Prioritizes brand-backed components." },
          "easy-service-access": { name: "Easy service access", bucket: "Prefers brand components for easy service." },
          "low-running-costs": { name: "Low running costs", bucket: "Low-maintenance drivetrain." },
          "performance-first": { name: "Performance first", bucket: "High-end components." }
        }
      },
      "e-wheels-new-electric-bikes-2025-10-02-160158-frame-type": {
        title: "Which frame type do you prefer?",
        answers: {
          "high-entry": { name: "High entry", bucket: "Maximum frame stiffness, classic look." },
          "low-entry": { name: "Low entry", bucket: "Easy mounting and dismounting." },
          "medium-high-entry": { name: "Medium-high entry", bucket: "Balances stability and accessibility." }
        }
      },
      "e-wheels-new-electric-bikes-2025-10-02-160158-dealbreakers-question-question": {
        title: "Any features you must have?",
        answers: {
          "fenders": { name: "Fenders", bucket: "" },
          "torque-sensor": { name: "Torque sensor", bucket: "Natural pedal feel." },
          "removable-battery": { name: "Removable battery", bucket: "Easy charging." },
          "brand-components": { name: "Brand components", bucket: "Prioritizes brand-backed components." }
        }
      },
      "e-wheels-new-electric-bikes-2025-10-02-160158-features-manual": {
        title: "Any features you must have?",
        answers: {
          "carbon-frame": { name: "Carbon frame", bucket: "" },
          "carrier": { name: "Carrier", bucket: "" },
          "fenders": { name: "Fenders", bucket: "" },
          "full-suspension": { name: "Full suspension", bucket: "" }
        }
      }
    };

    // Icons as SVG
    const ChevronDown = () => (
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    );

    const ChevronUp = () => (
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="18 15 12 9 6 15"></polyline>
      </svg>
    );

    const Edit2 = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
      </svg>
    );

    const Check = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
    );

    const X = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    );

    const Download = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="7 10 12 15 17 10"></polyline>
        <line x1="12" y1="15" x2="12" y2="3"></line>
      </svg>
    );

    const EditableField = ({ value, onSave, placeholder, multiline = false }) => {
      const [isEditing, setIsEditing] = useState(false);
      const [editValue, setEditValue] = useState(value);

      const handleSave = () => {
        onSave(editValue);
        setIsEditing(false);
      };

      const handleCancel = () => {
        setEditValue(value);
        setIsEditing(false);
      };

      const handleKeyDown = (e) => {
        if (e.key === 'Enter' && !multiline) handleSave();
        if (e.key === 'Escape') handleCancel();
      };

      if (isEditing) {
        return (
          <div className="flex items-start gap-2 w-full">
            {multiline ? (
              <textarea
                value={editValue}
                onChange={(e) => setEditValue(e.target.value)}
                onKeyDown={handleKeyDown}
                className="flex-1 p-2 border-2 border-blue-400 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800"
                rows={3}
                autoFocus
              />
            ) : (
              <input
                type="text"
                value={editValue}
                onChange={(e) => setEditValue(e.target.value)}
                onKeyDown={handleKeyDown}
                className="flex-1 p-2 border-2 border-blue-400 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800"
                autoFocus
              />
            )}
            <button onClick={handleSave} className="p-2 text-green-600 hover:bg-green-100 rounded"><Check size={18} /></button>
            <button onClick={handleCancel} className="p-2 text-red-600 hover:bg-red-100 rounded"><X size={18} /></button>
          </div>
        );
      }

      return (
        <div className="group flex items-center gap-2 cursor-pointer hover:bg-black/5 rounded p-1 -m-1" onClick={() => setIsEditing(true)}>
          <span className={value ? "" : "text-gray-400 italic"}>{value || placeholder}</span>
          <span className="opacity-0 group-hover:opacity-100 transition-opacity"><Edit2 size={14} /></span>
        </div>
      );
    };

    const AnswerCard = ({ answer, onUpdate, showEN, questionCode }) => {
      const enRef = englishRef[questionCode]?.answers?.[answer.code];
      
      return (
        <div className="bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all">
          <div className="flex-1">
            <div className="flex items-center gap-2 mb-1">
              <span className="text-xs text-gray-400 font-mono bg-gray-100 px-2 py-0.5 rounded">{answer.code}</span>
            </div>
            <div className="font-medium text-gray-800">
              <EditableField 
                value={answer.name} 
                onSave={(val) => onUpdate({ ...answer, name: val })}
                placeholder="Answer name..."
              />
            </div>
            {showEN && enRef?.name && (
              <div className="text-xs text-green-700 mt-1 bg-green-50 inline-block px-2 py-0.5 rounded">EN: {enRef.name}</div>
            )}
          </div>
          
          <div className="mt-3 pt-3 border-t border-gray-100">
            <div className="text-sm text-gray-600">
              <EditableField 
                value={answer.bucketDefinition} 
                onSave={(val) => onUpdate({ ...answer, bucketDefinition: val })}
                placeholder="Bucket definition..."
                multiline
              />
            </div>
            {showEN && enRef?.bucket && (
              <div className="text-xs text-green-700 mt-2 bg-green-50 p-2 rounded">EN: {enRef.bucket}</div>
            )}
          </div>
        </div>
      );
    };

    const QuestionCard = ({ question, onUpdate, showEN }) => {
      const [isExpanded, setIsExpanded] = useState(true);
      const enRef = englishRef[question.code];

      const updateAnswer = (index, updatedAnswer) => {
        const newAnswers = [...question.answers];
        newAnswers[index] = updatedAnswer;
        onUpdate({ ...question, answers: newAnswers });
      };

      const shortCode = question.code.replace('e-wheels-new-electric-bikes-2025-10-02-160158-', '');

      return (
        <div className="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-6">
          <div className="bg-blue-600 text-white p-4">
            <div className="flex items-center justify-between">
              <div className="flex-1">
                <div className="flex items-center gap-2 mb-2">
                  <span className="text-xs bg-white/20 px-2 py-0.5 rounded font-mono">{shortCode}</span>
                </div>
                <div className="text-lg font-semibold">
                  <EditableField 
                    value={question.title} 
                    onSave={(val) => onUpdate({ ...question, title: val })}
                    placeholder="Question title..."
                  />
                </div>
                {showEN && enRef?.title && (
                  <div className="text-sm text-blue-200 mt-1">EN: {enRef.title}</div>
                )}
              </div>
              <button onClick={() => setIsExpanded(!isExpanded)} className="p-2 hover:bg-white/10 rounded-lg ml-4">
                {isExpanded ? <ChevronUp /> : <ChevronDown />}
              </button>
            </div>
          </div>

          {isExpanded && (
            <div className="p-4 bg-gray-50">
              {question.answers.length === 0 ? (
                <div className="text-center text-gray-500 py-6 italic bg-white rounded-lg border border-dashed border-gray-300">
                  üìä Slider question - no text answers
                </div>
              ) : (
                <div className="grid gap-3">
                  {question.answers.map((answer, idx) => (
                    <AnswerCard 
                      key={answer.code} 
                      answer={answer} 
                      onUpdate={(updated) => updateAnswer(idx, updated)}
                      showEN={showEN}
                      questionCode={question.code}
                    />
                  ))}
                </div>
              )}
            </div>
          )}
        </div>
      );
    };

    function QuestionEditor() {
      const [data, setData] = useState(initialData);
      const [showEN, setShowEN] = useState(true);
      const [searchTerm, setSearchTerm] = useState('');

      const updateQuestion = (index, updatedQuestion) => {
        const newQuestions = [...data.questions];
        newQuestions[index] = updatedQuestion;
        setData({ ...data, questions: newQuestions });
      };

      const exportJSON = () => {
        // Export EXACT same structure as input
        const exportData = {
          parameters: data.parameters,
          questions: data.questions
        };
        
        const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'e-wheels-questions-edited.json';
        a.click();
        URL.revokeObjectURL(url);
      };

      const filteredQuestions = data.questions.filter(q => 
        q.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
        q.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
        q.answers.some(a => a.name.toLowerCase().includes(searchTerm.toLowerCase()))
      );

      return (
        <div className="min-h-screen bg-gray-100">
          <div className="bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm">
            <div className="max-w-5xl mx-auto px-4 py-4">
              <div className="flex items-center justify-between mb-4 flex-wrap gap-4">
                <div>
                  <h1 className="text-2xl font-bold text-gray-800">üö¥ E-Bike Questions Editor test</h1>
                  <p className="text-sm text-gray-500 mt-1">Edit questions ‚Ä¢ Parameters preserved ‚Ä¢ Export = same format as input</p>
                </div>
                <div className="flex items-center gap-4 flex-wrap">
                  <label className="flex items-center gap-2 text-sm text-gray-600 cursor-pointer">
                    <input 
                      type="checkbox" 
                      checked={showEN} 
                      onChange={(e) => setShowEN(e.target.checked)}
                      className="rounded"
                    />
                    Show English
                  </label>
                  <button onClick={exportJSON} className="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium">
                    <Download size={18} />
                    Export JSON
                  </button>
                </div>
              </div>
              
              <input
                type="text"
                placeholder="üîç Search questions or answers..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
            </div>
          </div>

          <div className="max-w-5xl mx-auto px-4 py-6">
            <div className="text-sm text-gray-500 mb-4">
              {filteredQuestions.length} questions ‚Ä¢ {data.parameters.length} parameters (preserved) ‚Ä¢ Click text to edit
            </div>
            
            {filteredQuestions.map((question, idx) => (
              <QuestionCard 
                key={question.code}
                question={question}
                onUpdate={(updated) => updateQuestion(data.questions.findIndex(q => q.code === question.code), updated)}
                showEN={showEN}
              />
            ))}
          </div>
        </div>
      );
    }

    ReactDOM.render(<QuestionEditor />, document.getElementById('root'));
  </script>
</body>
</html>
